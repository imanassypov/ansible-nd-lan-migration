{#
================================================================================
Template: SVI Interface Configuration (JSON Payload)
================================================================================
Purpose:
  Generate JSON payload for the NDFC REST API to configure VLAN interfaces (SVIs)
  for management connectivity on pre-provisioned switches.

API Endpoint:
  POST /appcenter/cisco/ndfc/api/v1/lan-fabric/rest/globalInterface

Input Variables:
  serial_number              - Target switch serial number
  fabric_name                - Fabric name
  vlan_id                    - VLAN ID (e.g., 199)
  ip_address                 - IPv4 address without prefix (e.g., 198.18.24.84)
  prefix_length              - Subnet prefix length (e.g., 26)
  vrf_name                   - VRF name (empty for default VRF)
  description                - Interface description

Key Settings:
  policy: int_vlan           - VLAN interface policy
  interfaceType: INTERFACE_VLAN - SVI interface
  DISABLE_IP_REDIRECTS: true - Security best practice
  skipResourceCheck: false   - Validate resource availability

Notes:
  - Configures management VLAN interface for switch reachability
  - IP address is derived from mgmt_interface.yml
  - Run after 1.3 port-channel configuration
================================================================================
#}
{
  "policy": "int_vlan",
  "interfaceType": "INTERFACE_VLAN",
  "interfaces": [
    {
      "serialNumber": "{{ serial_number }}",
      "interfaceType": "INTERFACE_VLAN",
      "fabricName": "{{ fabric_name }}",
      "ifName": "vlan{{ vlan_id }}",
      "nvPairs": {
        "INTF_VRF": "{{ vrf_name | default('') }}",
        "IP": "{{ ip_address }}",
        "PREFIX": "{{ prefix_length }}",
        "IPv6": "",
        "PREFIXv6": "",
        "MTU": "",
        "ROUTING_TAG": "",
        "DESC": "{{ description | default('Management VLAN') }}",
        "DISABLE_IP_REDIRECTS": "true",
        "ENABLE_PIM_SPARSE": "false",
        "PIM_DR_PRIORITY": "1",
        "CONF": "",
        "ADMIN_STATE": "true",
        "ENABLE_HSRP": "",
        "HSRP_VIP": "",
        "HSRP_VIPv6": "",
        "HSRP_GROUP": "",
        "HSRP_GROUPv6": "",
        "HSRP_VERSION": "",
        "HSRP_PRIORITY": "",
        "PREEMPT": false,
        "MAC": "",
        "dhcpServerAddr1": "",
        "vrfDhcp1": "",
        "dhcpServerAddr2": "",
        "vrfDhcp2": "",
        "dhcpServerAddr3": "",
        "vrfDhcp3": "",
        "advSubnetInUnderlay": "false",
        "ENABLE_NETFLOW": "false",
        "NETFLOW_MONITOR": "",
        "NETFLOW_SAMPLER": "",
        "INTF_NAME": "vlan{{ vlan_id }}"
      }
    }
  ],
  "skipResourceCheck": false
}
